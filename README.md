# Лабораторная работа №1: Создание процессов в Windows

## Цель работы
Изучение механизмов создания и управления процессами в операционной системе Windows с использованием Win32 API. Разработка приложения, демонстрирующего взаимодействие между процессами через файловую систему.

## Описание проекта
Проект состоит из трех программ:
- **Creator** – создает бинарный файл с записями о сотрудниках
- **Reporter** – формирует текстовый отчет на основе бинарного файла
- **Main** – управляющая программа, запускающая Creator и Reporter

## Функциональность

### Creator
- Принимает через командную строку: имя бинарного файла и количество записей
- Запрашивает у пользователя данные сотрудников (ID, имя, часы)
- Создает бинарный файл со структурой `employee`
- Проверяет корректность ввода (положительный ID, имя < 10 символов, часы >= 0)

### Reporter
- Принимает через командную строку: имя бинарного файла, имя файла отчета, почасовую ставку
- Читает бинарный файл, сортирует сотрудников по ID
- Создает текстовый отчет с рассчитанной зарплатой (часы * ставка)
- Формат отчета: 
  - Заголовок: "Отчет по файлу «имя_файла»"
  - Таблица: ID, имя, часы, зарплата

### Main
- Запрашивает у пользователя исходные данные
- Запускает Creator и ожидает его завершения (WaitForSingleObject)
- Выводит содержимое бинарного файла
- Запускает Reporter и ожидает его завершения
- Выводит отчет на экран

## Технические детали

### Используемые технологии
- **Язык**: C++17
- **API**: Win32 (CreateProcess, WaitForSingleObject, GetLastError)
- **Сборка**: CMake
- **Тестирование**: Модульные тесты

### Ключевые особенности реализации

1. **Управление процессами**
   - Создание процессов через `CreateProcess`
   - Ожидание завершения через `WaitForSingleObject` с `INFINITE`
   - Получение кода возврата через `GetExitCodeProcess`

2. **Обработка ошибок**
   - Детальная диагностика через `GetLastError` и `FormatMessage`
   - Проверка всех системных вызовов
   - Обработка исключений через try/catch

3. **Валидация данных**
   - Проверка имен файлов (длина, недопустимые символы)
   - Проверка свободного места на диске
   - Защита от некорректного ввода (clearInput, safeInput)
   - Лимит попыток ввода (3 попытки)

4. **Работа с файлами**
   - Бинарный файл с прямой записью структур
   - Текстовый отчет с форматированием
   - Проверка существования файла перед перезаписью

5. **Архитектура**
   - Структура employee вынесена в отдельный .h файл (избегание дублирования)
   - RAII для управления ресурсами
   - Правильный порядок закрытия дескрипторов

### Структура проекта
lab1/
├── CMakeLists.txt
├── include/
│ └── employee.h
├── src/
│ ├── Creator.cpp
│ ├── Reporter.cpp
│ └── Main.cpp
└── tests/
└── test_processes.cpp

### Сборка
```bash
mkdir build
cd build
cmake ..
cmake --build . --config Release

### Запуск
cd Release
Main.exe

### Тестирование
cd Release
ProcessTests.exe